{{ if and .Site.Params.staticman (not (or .Site.Params.disable_comments .Params.disable_comments)) }}
<section id="comments" style="background: white; max-width: 60%;">
    <div id="ModalLoginForm" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <form role="form" target="dummyframe" id="comment-form" class="post-new-comment form-group" method="post" action="{{ .Site.Params.staticman.endpoint }}/{{ .Site.Params.staticman.username }}/{{ .Site.Params.staticman.repository }}/{{ .Site.Params.staticman.branch }}/comments">
                        <input type="hidden" name="_token" value="">
                        <div class="form-group">
                            <div>
                                <input type="text" name="fields[name]" class="post-comment-field form-control input-lg" id="name" placeholder="Name *" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input type="text" name="fields[description]" class="post-comment-field form-control" placeholder="Description" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="instagramURL" type="text" name="fields[instagramURL]" class="post-comment-field form-control" placeholder="Instagram" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="websiteURL" type="text" name="fields[websiteURL]" class="post-comment-field form-control" placeholder="Website" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="linkedinURL" type="text" name="fields[linkedinURL]" class="post-comment-field form-control" placeholder="LinkedIn" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="facebookURL" type="text" name="fields[facebookURL]" class="post-comment-field form-control" placeholder="Facebook" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="youtubeURL" type="text" name="fields[youtubeURL]" class="post-comment-field form-control" placeholder="YouTube" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="twitterURL" type="text" name="fields[twitterURL]" class="post-comment-field form-control" placeholder="Twitter" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="flickrURL" type="text" name="fields[flickrURL]" class="post-comment-field form-control" placeholder="Flickr" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="gabURL" type="text" name="fields[gabURL]" class="post-comment-field form-control" placeholder="Gab" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="odyseeURL" type="text" name="fields[odyseeURL]" class="post-comment-field form-control" placeholder="Odysee" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="tiktokURL" type="text" name="fields[tiktokURL]" class="post-comment-field form-control" placeholder="TikTok" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="bitchuteURL" type="text" name="fields[bitchuteURL]" class="post-comment-field form-control" placeholder="Bitchute" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="vimeoURL" type="text" name="fields[vimeoURL]" class="post-comment-field form-control" placeholder="Vimeo" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input id="otherURL" type="text" name="fields[otherURL]" class="post-comment-field form-control" placeholder="Other" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <input disabled type="submit" class="post-comment-field btn btn-primary comment-buttons" value="Submit" id="btnSubmitSources" onclick="validateFormInputs()">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{{ end }}

<script>
    function validateFormInputs() {
        // Check for valid URL format
        if( validURL(document.getElementById("instagramURL").value) && 
            validURL(document.getElementById("websiteURL").value) &&
            validURL(document.getElementById("linkedinURL").value) &&
            validURL(document.getElementById("facebookURL").value) &&
            validURL(document.getElementById("youtubeURL").value) &&
            validURL(document.getElementById("twitterURL").value) &&
            validURL(document.getElementById("flickrURL").value) &&
            validURL(document.getElementById("gabURL").value) &&
            validURL(document.getElementById("odyseeURL").value) &&
            validURL(document.getElementById("tiktokURL").value) &&
            validURL(document.getElementById("bitchuteURL").value) &&
            validURL(document.getElementById("otherURL").value) &&
            validURL(document.getElementById("vimeoURL").value)) {
                $("#ModalLoginForm").modal('toggle');
        }
    }
</script>
<script>
  document.getElementById("name").addEventListener("keyup", function() {
      var nameInput = document.getElementById('name').value;
      if (nameInput != "") {
          document.getElementById('btnSubmitSources').removeAttribute("disabled");
      } else {
          document.getElementById('btnSubmitSources').setAttribute("disabled", null);
      }
  });
</script>
<script>
    function validURL(str) {
        if(str === ''){
            return true;
        }

        var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
            '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
        return !!pattern.test(str);
        }
</script>
